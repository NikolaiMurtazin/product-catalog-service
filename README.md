# Product Catalog Service (–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å) - –î–ó 2

–ö–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–∞–ª–æ–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤, –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å **PostgreSQL**, **Liquibase** –∏ **Testcontainers**.

–ü—Ä–æ–µ–∫—Ç –±—ã–ª –ø–µ—Ä–µ–≤–µ–¥–µ–Ω —Å In-Memory —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–î–ó 1) –Ω–∞ **–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL** —Å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ (Liquibase)** –∏ **–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏ (Testcontainers)**.

---

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –§–∏—á–∏

* **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Clean Architecture):**
    * **Domain:** –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (`Product`, `User`).
    * **Repository:** –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º (`ProductRepository`) –∏ –∏—Ö **JDBC-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** –¥–ª—è **PostgreSQL**.
    * **Service:** –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (`ProductService`, `AuthService`).
    * **UI:** –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`ConsoleMenu`).
    * **Util:** –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è `ConfigLoader`, `ConnectionManager` –∏ `LiquibaseRunner`.

* **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î (Liquibase):**
    * **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î** —Å –ø–æ–º–æ—â—å—é **Liquibase**.
    * –°–∫—Ä–∏–ø—Ç—ã DDL (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞) –∏ DML (–¥–∞–Ω–Ω—ã–µ) —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ XML-—Ñ–∞–π–ª—ã.
    * **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ö–µ–º—ã:** –¢–∞–±–ª–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `app_schema`, —Å–ª—É–∂–µ–±–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã Liquibase ‚Äî –≤ `liquibase_schema` (—Å—Ö–µ–º–∞ `public` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è).
    * **Sequence'—ã:** ID –¥–ª—è `users` –∏ `products` –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `sequence` –≤ –ë–î.

* **–û–∫—Ä—É–∂–µ–Ω–∏–µ (Docker):**
    * –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å **PostgreSQL**, –∑–∞–ø—É—â–µ–Ω–Ω—ã–º —á–µ—Ä–µ–∑ `docker-compose.yml`.
    * –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å, –ë–î) –≤ `docker-compose.yml` –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã.

* **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
    * –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î (URL, –ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å) –∏ –∏–º–µ–Ω–∞ —Å—Ö–µ–º –≤—ã–Ω–µ—Å–µ–Ω—ã –≤–æ –≤–Ω–µ—à–Ω–∏–π —Ñ–∞–π–ª `config.properties`.

* **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Testcontainers):**
    * –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å **Testcontainers**.
    * –¢–µ—Å—Ç—ã **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–Ω–∏–º–∞—é—Ç** "—á–∏—Å—Ç—ã–π" Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å PostgreSQL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.
    * **Liquibase** **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∫–∞—Ç—ã–≤–∞–µ—Ç** –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—É—é –ë–î –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Ç–µ—Å—Ç–æ–≤.
    * –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç *–≤—Å—é* —Å–≤—è–∑–∫—É: `Service` -> `Repository` -> `JDBC` -> `–†–µ–∞–ª—å–Ω–∞—è –ë–î`.

* **–ü–æ–∏—Å–∫ –∏ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
    * –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –±—Ä–µ–Ω–¥—É –∏ –¥–∏–∞–ø–∞–∑–æ–Ω—É —Ü–µ–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ SQL** (`ILIKE`, `WHERE ... AND ...`).
    * –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ **DTO** (`SearchCriteria`).

* **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ê—É–¥–∏—Ç:**
    * –î–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (`admin`/`admin123`) **–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —á–µ—Ä–µ–∑ **–º–∏–≥—Ä–∞—Ü–∏—é Liquibase**.
    * –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è (–≤—Ö–æ–¥, CRUD) –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ **—Ç–∞–±–ª–∏—Ü—É `audit_log` –≤ PostgreSQL**.

* **(–ë–û–ù–£–°) –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
    * –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –∏–∑ –î–ó-1 **—Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ** –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö JDBC-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
    * –ö—ç—à **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î.

* **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:**
    * –í–µ—Å—å –∫–æ–¥ –ø–æ–∫—Ä—ã—Ç **Javadoc**.
    * –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∏—á–∏ Java 17+** (`record`, `switch-expressions`, `"""Text Blocks"""`).
    * –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **Lombok** –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã `domain`-–º–æ–¥–µ–ª–µ–π.

---

## üõ† –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

* **Java 17**
* **Maven**
* **PostgreSQL** (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
* **Docker** / `docker-compose` (–û–∫—Ä—É–∂–µ–Ω–∏–µ)
* **Liquibase** (–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î)
* **JDBC** (–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î)
* **Testcontainers** (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã)
* **Lombok**
* **JUnit 5**
* **Mockito** (–¥–ª—è –≥–∏–±—Ä–∏–¥–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤)
* **AssertJ**

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é

1.  **Java 17+**
2.  **Maven 3.8+**
3.  **Docker Desktop** (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–∑–∞–ø—É—â–µ–Ω**!)

---

## üèÉ‚Äç‚ôÇÔ∏è –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–î–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏)

### 1. –ó–∞–ø—É—Å–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–≤ Docker)

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞. –≠—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑**.
*(–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker Desktop –∑–∞–ø—É—â–µ–Ω)*

```bash
  docker-compose up -d 
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–¥–Ω–∏–º–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `postgres` —Å –±–∞–∑–æ–π `marketplace_db` –Ω–∞ –ø–æ—Ä—Ç—É `5433`.

### 2. –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
  mvn clean install
```

*(–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å—Ç–∏—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–∞–º–∏ –ø–æ–¥–Ω–∏–º—É—Ç –≤—Ç–æ—Ä–æ–π, –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.)*

### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏, –∑–∞–ø—É—Å—Ç–∏—Ç–µ `.jar`:

```bash
  java -jar target/product-catalog-service-1.0-SNAPSHOT.jar
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è, Liquibase –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∫–∞—Ç–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ `marketplace_db`, –∏ –ø–æ—è–≤–∏—Ç—Å—è –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –º–µ–Ω—é.

### 4. –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

* **–õ–æ–≥–∏–Ω:** `admin`

* **–ü–∞—Ä–æ–ª—å:** `admin123`

*(–≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –ë–î –º–∏–≥—Ä–∞—Ü–∏–µ–π `02-prefill-data.xml`)*

---

## üß™ –ó–∞–ø—É—Å–∫ –¢–µ—Å—Ç–æ–≤

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ **–Ω–µ –Ω—É–∂–Ω–æ** –≤—ã–ø–æ–ª–Ω—è—Ç—å `docker-compose up`. Testcontainers **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø–æ–¥–Ω–∏–º–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é 
–≤—Ä–µ–º–µ–Ω–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

*(–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker Desktop –∑–∞–ø—É—â–µ–Ω)*

```bash
   mvn clean test